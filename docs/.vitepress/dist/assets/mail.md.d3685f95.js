import{_ as s,o as a,c as n,O as l}from"./chunks/framework.571309da.js";const A=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"mail.md","filePath":"mail.md"}'),o={name:"mail.md"},e=l(`<h2 id="mail" tabindex="-1">Mail <a class="header-anchor" href="#mail" aria-label="Permalink to &quot;Mail&quot;">​</a></h2><p>⬆️ <a href="./README.html#laravel-tips">Go to main menu</a> ⬅️ <a href="./auth.html">Previous (Auth)</a> ➡️ <a href="./artisan.html">Next (Artisan)</a></p><ul><li><a href="#testing-email-into-laravellog">Testing email into laravel.log</a></li><li><a href="#you-dont-have-to-store-files-to-use-them-as-email-attachments-in-laravel">You don’t have to store files to use them as email attachments in Laravel</a></li><li><a href="#preview-mailables">Preview Mailables</a></li><li><a href="#preview-mail-without-mailables">Preview Mail without Mailables</a></li><li><a href="#default-email-subject-in-laravel-notifications">Default Email Subject in Laravel Notifications</a></li><li><a href="#send-notifications-to-anyone">Send Notifications to Anyone</a></li><li><a href="#set-conditional-object-properties">Set conditional object properties</a></li></ul><h3 id="testing-email-into-laravel-log" tabindex="-1">Testing email into laravel.log <a class="header-anchor" href="#testing-email-into-laravel-log" aria-label="Permalink to &quot;Testing email into laravel.log&quot;">​</a></h3><p>If you want to test email contents in your app but unable or unwilling to set up something like Mailgun, use <code>.env</code> parameter <code>MAIL_DRIVER=log</code> and all the email will be saved into <code>storage/logs/laravel.log</code> file, instead of actually being sent.</p><h3 id="you-don-t-have-to-store-files-to-use-them-as-email-attachments-in-laravel" tabindex="-1">You don’t have to store files to use them as email attachments in Laravel <a class="header-anchor" href="#you-don-t-have-to-store-files-to-use-them-as-email-attachments-in-laravel" aria-label="Permalink to &quot;You don’t have to store files to use them as email attachments in Laravel&quot;">​</a></h3><p>Simply use <strong>attachData</strong> to add user uploaded files in Mailables.</p><p>Here&#39;s a snippet from a Mailable class using it.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">build</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$this-&gt;</span><span style="color:#82AAFF;">subject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Inquiry</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">to</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">example@example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">markdown</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">email.inquiry</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">attachData</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">               </span><span style="color:#89DDFF;">$this-&gt;</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">               </span><span style="color:#89DDFF;">$this-&gt;</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">getClientOriginalName</span><span style="color:#89DDFF;">(),</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Tip given by <a href="https://twitter.com/ecrmnn/status/1570449885664808961" target="_blank" rel="noreferrer">@ecrmnn</a></p><h3 id="preview-mailables" tabindex="-1">Preview Mailables <a class="header-anchor" href="#preview-mailables" aria-label="Permalink to &quot;Preview Mailables&quot;">​</a></h3><p>If you use Mailables to send email, you can preview the result without sending, directly in your browser. Just return a Mailable as route result:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/mailable</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">invoice </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> App</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">Invoice</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> App</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Mail</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">InvoicePaid</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">invoice</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">});</span></span></code></pre></div><h3 id="preview-mail-without-mailables" tabindex="-1">Preview Mail without Mailables <a class="header-anchor" href="#preview-mail-without-mailables" aria-label="Permalink to &quot;Preview Mail without Mailables&quot;">​</a></h3><p>You can also preview your email without Mailables. For instance, when you are creating notification, you can specify the markdown that may be use for your mail notification.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">Illuminate</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Notifications</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Messages</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">MailMessage</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/mailable</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">invoice </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> App</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">Invoice</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MailMessage</span><span style="color:#89DDFF;">)-&gt;</span><span style="color:#82AAFF;">markdown</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">emails.invoice-paid</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">compact</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">invoice</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">});</span></span></code></pre></div><p>You may also use other methods provided by <code>MailMessage</code> object such as <code>view</code> and others.</p><p>Tip given by <a href="https://github.com/raditzfarhan" target="_blank" rel="noreferrer">@raditzfarhan</a></p><h3 id="default-email-subject-in-laravel-notifications" tabindex="-1">Default Email Subject in Laravel Notifications <a class="header-anchor" href="#default-email-subject-in-laravel-notifications" aria-label="Permalink to &quot;Default Email Subject in Laravel Notifications&quot;">​</a></h3><p>If you send Laravel Notification and don&#39;t specify subject in <strong>toMail()</strong>, default subject is your notification class name, CamelCased into Spaces.</p><p>So, if you have:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserRegistrationEmail</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Notification</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Then you will receive an email with subject <strong>User Registration Email</strong>.</p><h3 id="send-notifications-to-anyone" tabindex="-1">Send Notifications to Anyone <a class="header-anchor" href="#send-notifications-to-anyone" aria-label="Permalink to &quot;Send Notifications to Anyone&quot;">​</a></h3><p>You can send Laravel Notifications not only to a certain user with <code>$user-&gt;notify()</code>, but also to anyone you want, via <code>Notification::route()</code>, with so-called &quot;on-demand&quot; notifications:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Notification</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mail</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">taylor@example.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">nexmo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">5555555555</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">slack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://hooks.slack.com/services/...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">notify</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">InvoicePaid</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">invoice</span><span style="color:#89DDFF;">));</span></span></code></pre></div><h3 id="set-conditional-object-properties" tabindex="-1">Set conditional object properties <a class="header-anchor" href="#set-conditional-object-properties" aria-label="Permalink to &quot;Set conditional object properties&quot;">​</a></h3><p>You can use the <code>when()</code> or <code>unless()</code> methods in your MailMessage notifications to set conditional object properties like a call to action.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">InvoicePaid</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Notification</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toMail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MailMessage</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">success</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">line</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">We</span><span style="color:#A6ACCD;">\\&#39;</span><span style="color:#C3E88D;">ve received your payment</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">when</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">isOnMonthlyPaymentPlan</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">MailMessage</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">action</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Save 20% by paying yearly</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">account.billing</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">line</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Thank you for using Unlock.sh</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Use the <code>when</code> or <code>unless</code> methods in you own classes by using the <code>Illuminate\\Support\\Traits\\Conditionable</code> trait</p><p>Tip given by <a href="https://twitter.com/Philo01/status/1503302749525528582" target="_blank" rel="noreferrer">@Philo01</a></p>`,31),p=[e];function t(c,r,i,D,F,y){return a(),n("div",null,p)}const u=s(o,[["render",t]]);export{A as __pageData,u as default};
